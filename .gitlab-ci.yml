stages:
    - build
    - test
    - deploy

cache:
  key: node
  paths:
    - .npm/

build_server:
    stage: build
    script:
        - echo "Build serveur"

build_electron:
    stage: build
    script:
        - echo "Should pass"
        - ./pipeline/pass.sh


test_server:
    stage: test
    allow_failure: true
    script:
        - echo "Test server"
        - ./pipeline/test_server.sh
    

test_electron:
    stage: test
    allow_failure: true
    script:
        - echo "Test electron"
        - ./pipeline/test_electron.sh


deploy_dev:
    stage: deploy
    only:
        - develop
    script:
        - echo "Deploy dev"

deploy_prod:
    stage: deploy
    only:
        - master
    script:
        - echo "Deploy prod"
